{% extends "base.html" %}

{% block title %}Event #{{ event.EventID }} - Admin{% endblock %}

{% block breadcrumbs %}
{% from 'components/macros.html' import breadcrumbs %}
<div class="container section" style="padding-bottom:0;">
  {{ breadcrumbs([{'label':'Admin','href':'/admin'},{'label':'Users','href':'/admin/users'}], 'Event #' ~ event.EventID) }}
  </div>
{% endblock %}
{% block content %}
<div class="container section center">
  {% from 'components/macros.html' import page_hero, btn_row %}
  {{ page_hero('Event #' ~ event.EventID, (event.Name ~ ' â€” Owner: ' ~ ('#' ~ owner.UserID ~ ' ' ~ owner.FirstName ~ ' ' ~ owner.LastName ~ ' (' ~ owner.Email ~ ')') if owner else 'Unknown')) }}

  <div class="grid grid-2 section equal-heights">
    <div class="card full-height">
      <h3>Details</h3>
      <div class="kv">
        <div>Code</div><div>{{ event.Code }}</div>
        <div>Date</div><div>{{ event.Date }}</div>
        <div>Published</div><div>{% if event.Published %}Yes{% else %}No{% endif %}</div>
        <div>Date Locked</div><div>{% if event.IsDateLocked %}Yes ({{ event.DateLockedAt }}){% else %}No{% endif %}</div>
        <div>Created</div><div>{{ event.CreatedAt }}</div>
        <div>Updated</div><div>{{ event.LastUpdated }}</div>
      </div>
      {% call btn_row('style="margin-top:12px;"') %}
        <a class="btn" href="/events/code/{{ event.Code }}">Open as owner</a>
        <a class="btn" href="/e/{{ event.Code }}">Public share</a>
      {% endcall %}
    </div>
  <div class="card full-height">
      <h3>Owner</h3>
      {% if owner %}
      <div class="kv">
        <div>User</div><div>#{{ owner.UserID }}</div>
        <div>Name</div><div>{{ owner.FirstName }} {{ owner.LastName }}</div>
        <div>Email</div><div>{{ owner.Email }}</div>
        <div>Verified</div><div>{% if owner.EmailVerified %}Yes{% else %}No{% endif %}</div>
        <div>Active</div><div>{% if owner.IsActive %}Yes{% else %}No{% endif %}</div>
        <div>Admin</div><div>{% if owner.IsAdmin %}Yes{% else %}No{% endif %}</div>
      </div>
      {% else %}
      <p class="muted">Owner not found.</p>
      {% endif %}
    </div>
  </div>

  {% call btn_row('class="section"') %}
    <a class="btn" href="/admin">Back to Admin</a>
    <a class="btn" href="/admin/users">Manage Users</a>
  {% endcall %}
</div>
{% endblock %}
